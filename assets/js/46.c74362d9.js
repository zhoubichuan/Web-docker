(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{385:function(n,s,t){"use strict";t.r(s);var a=t(9),e=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[n._v("#")]),n._v(" nginx")]),n._v(" "),s("h2",{attrs:{id:"_1-下载镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载镜像"}},[n._v("#")]),n._v(" 1.下载镜像")]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" pull nginx\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("h2",{attrs:{id:"_2-修改配置文件为本地"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改配置文件为本地"}},[n._v("#")]),n._v(" 2.修改配置文件为本地")]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" run -d -p "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 --name nginx nginx   "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#运行容器")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("exec")]),n._v(" -it nginx /bin/bash             "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#进入容器查看需要挂载的文件")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" nginx:/etc/nginx/nginx.conf /etc/nginx/               "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#从容器中复制配置文件")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" nginx:/etc/nginx/conf.d /etc/nginx/                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#从容器中复制配置文件夹")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" nginx:/usr/share/nginx/html /var/nginx/               "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#从容器中复制html文件")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" nginx:/var/log/nginx /var/nginx/log                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#从容器中复制日志文件")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br")])]),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" stop nginx                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#删除nginx容器")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("rm")]),n._v(" nginx\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("chmod")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("777")]),n._v(" /etc/nginx/nginx.conf\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("h2",{attrs:{id:"_3-配置nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置nginx"}},[n._v("#")]),n._v(" 3.配置nginx")]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[n._v("    server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        server_name  "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("81.71")]),n._v(".127.69"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        location ~*^.+$ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            root   /usr/src/zhoubichuan/prod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index  index.html index.htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("h2",{attrs:{id:"_4-启动镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动镜像"}},[n._v("#")]),n._v(" 4.启动镜像")]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" run -d -p "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 --name nginx --net "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("host")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -v /etc/nginx/nginx.conf:/etc/nginx/nginx.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -v /etc/nginx/conf.d:/etc/nginx/conf.d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -v /etc/nginx/cert:/etc/nginx/cert "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -v /var/nginx/html:/usr/share/nginx/html "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -v /var/nginx/log:/var/log/nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[n._v("LANG")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("C.UTF-8 -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[n._v("LC_ALL")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("C.UTF-8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n --privileged"),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("true --restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("镜像id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br")])]),s("p",[n._v("说明：-e LANG=C.UTF-8 -e LC_ALL=C.UTF-8 是解决 nginx 中文乱码")]),n._v(" "),s("p",[n._v("-d :守护式容器在后台运行")]),n._v(" "),s("p",[n._v("-p：端口映射，格式为 主机(宿主)端口:容器端口")]),n._v(" "),s("p",[n._v("-v：挂载目录")]),n._v(" "),s("p",[n._v("--privileged=true 给容器内 root 权限")]),n._v(" "),s("p",[n._v("--restart=always 随 docker 自启动")]),n._v(" "),s("p",[n._v("--net host 容器将不会虚拟出自己的网卡，配置自己的 IP 等，而是使用宿主机的 IP 和端口")])])}),[],!1,null,null,null);s.default=e.exports}}]);